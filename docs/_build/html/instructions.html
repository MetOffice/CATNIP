
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Useful commands &#8212; catnip 1 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Dew point temperature calculation" href="tools.html" />
    <link rel="prev" title="The CATNIP library" href="index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="tools.html" title="Dew point temperature calculation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="The CATNIP library"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">catnip 1 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="useful-commands">
<h1>Useful commands<a class="headerlink" href="#useful-commands" title="Permalink to this headline">¶</a></h1>
<p>Below are some fcm commands and tips I have found useful.</p>
<div class="section" id="getting-your-own-local-copy-of-catnip">
<h2>Getting your own local copy of CATNIP<a class="headerlink" href="#getting-your-own-local-copy-of-catnip" title="Permalink to this headline">¶</a></h2>
<p>CATNIP is a Metoffice/Private repository. You must have a github account with at least a <em>Read</em> access. You can get
a local copy of the CATNIP library by cloning it either</p>
<p>via SSH:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">git</span><span class="nd">@github</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="n">MetOffice</span><span class="o">/</span><span class="n">CATNIP</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p><strong>Note:</strong> make sure you you SSH key is linked to your github account. More information can be found in here:
<a class="reference external" href="https://help.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh">https://help.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh</a></p>
<p>or via HTTPS:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">MetOffice</span><span class="o">/</span><span class="n">CATNIP</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
</div>
<div class="section" id="doctest-in-brief">
<h2>Doctest in brief<a class="headerlink" href="#doctest-in-brief" title="Permalink to this headline">¶</a></h2>
<p>Doc tests are a simple but useful way of checking your function does what you are expecting it to do. The doctest module along with examples is described <a class="reference external" href="https://docs.python.org/2/library/doctest.html">here</a></p>
<p>Essentially, doctest looks through your code for text that has the format of an interactive python session. It executes that text as python code to check that it works exactly as shown. Below is a very simple example of a function which includes a doc test:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">doctest example called example.py</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="k">def</span> <span class="nf">add_one</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This function adds 1.0 to a number.</span>
<span class="sd">    Below is a doctest:</span>

<span class="sd">    &gt;&gt;&gt; x = 12</span>
<span class="sd">    &gt;&gt;&gt; y = add_one(x)</span>
<span class="sd">    &gt;&gt;&gt; print(y)</span>
<span class="sd">    13.0</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">y</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="mf">1.</span>
    <span class="k">return</span> <span class="n">y</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">doctest</span>
    <span class="n">doctest</span><span class="o">.</span><span class="n">testmod</span><span class="p">()</span>
</pre></div>
</div>
<p>To check that our function is working as expected, and passes the doctest we can simply:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">example</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>If the tests are successful, nothing will be returned, for a verbose response use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">example</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">v</span>
<span class="n">Trying</span><span class="p">:</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">12</span>
<span class="n">Expecting</span> <span class="n">nothing</span>
<span class="n">ok</span>
<span class="n">Trying</span><span class="p">:</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">add_one</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">Expecting</span> <span class="n">nothing</span>
<span class="n">ok</span>
<span class="n">Trying</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="n">Expecting</span><span class="p">:</span>
    <span class="mf">13.0</span>
<span class="n">ok</span>
<span class="mi">1</span> <span class="n">items</span> <span class="n">had</span> <span class="n">no</span> <span class="n">tests</span><span class="p">:</span>
    <span class="n">__main__</span>
<span class="mi">1</span> <span class="n">items</span> <span class="n">passed</span> <span class="nb">all</span> <span class="n">tests</span><span class="p">:</span>
   <span class="mi">3</span> <span class="n">tests</span> <span class="ow">in</span> <span class="n">__main__</span><span class="o">.</span><span class="n">add_one</span>
<span class="mi">3</span> <span class="n">tests</span> <span class="ow">in</span> <span class="mi">2</span> <span class="n">items</span><span class="o">.</span>
<span class="mi">3</span> <span class="n">passed</span> <span class="ow">and</span> <span class="mi">0</span> <span class="n">failed</span><span class="o">.</span>
<span class="n">Test</span> <span class="n">passed</span><span class="o">.</span>
</pre></div>
</div>
<p>All CATNIP tools should have a doctest, it can also be useful to include doc tests to check your function reports the expected error messages when it fails.</p>
</div>
</div>
<div class="section" id="qa-instructions-for-the-function-writer">
<h1>QA instructions for the function writer<a class="headerlink" href="#qa-instructions-for-the-function-writer" title="Permalink to this headline">¶</a></h1>
<div class="section" id="open-an-issue">
<h2>Open an issue<a class="headerlink" href="#open-an-issue" title="Permalink to this headline">¶</a></h2>
<p>Open a ticket on <a class="reference external" href="https://github.com/MetOffice/CATNIP/issues">https://github.com/MetOffice/CATNIP/issues</a> and describe the function.</p>
</div>
<div class="section" id="create-a-branch">
<h2>Create a branch<a class="headerlink" href="#create-a-branch" title="Permalink to this headline">¶</a></h2>
<p>To create a branch off the CATNIP trunk:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">branch</span> <span class="p">[</span><span class="n">branch</span> <span class="n">name</span><span class="p">]</span>
</pre></div>
</div>
<p>The above command will create the new branch and sets it as your working branch noted by a ‘*’ next to it. You can check this by using this command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">branch</span>
</pre></div>
</div>
<p>output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">master</span>
<span class="o">*</span> <span class="n">branch</span> <span class="n">name</span>
</pre></div>
</div>
</div>
<div class="section" id="add-your-function-to-the-branch">
<h2>Add your function to the branch<a class="headerlink" href="#add-your-function-to-the-branch" title="Permalink to this headline">¶</a></h2>
<p>Add your function to your branch and develop it. To add your function (from the directory where the working copy of your branch lives):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">add</span> <span class="p">[</span><span class="n">file</span> <span class="n">name</span><span class="p">]</span>
</pre></div>
</div>
<p>To commit changes to the branch:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s1">&#39;some description for your function&#39;</span>
</pre></div>
</div>
<p><strong>Note:</strong> More information on git can be found here: <a class="reference external" href="https://git-scm.com/doc">https://git-scm.com/doc</a></p>
</div>
<div class="section" id="pushing-your-changes-to-the-remote-repository">
<h2>Pushing your changes to the remote repository<a class="headerlink" href="#pushing-your-changes-to-the-remote-repository" title="Permalink to this headline">¶</a></h2>
<p>you can push your branch to the remote github repository using this command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">push</span> <span class="o">--</span><span class="nb">set</span><span class="o">-</span><span class="n">upstream</span> <span class="n">origin</span> <span class="p">[</span><span class="n">branch</span> <span class="n">name</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="passing-the-function-to-the-reviewer">
<h2>Passing the function to the reviewer<a class="headerlink" href="#passing-the-function-to-the-reviewer" title="Permalink to this headline">¶</a></h2>
<p><strong>NEW GITHUB RELEVANT INSTRUCTIONS TO BE ADDED</strong>
e.g. how to make a pull request</p>
</div>
</div>
<div class="section" id="qa-instructions-for-the-reviewer">
<h1>QA instructions for the reviewer<a class="headerlink" href="#qa-instructions-for-the-reviewer" title="Permalink to this headline">¶</a></h1>
<div class="section" id="check-out-the-function-to-be-reviewed">
<h2>Check out the function to be reviewed<a class="headerlink" href="#check-out-the-function-to-be-reviewed" title="Permalink to this headline">¶</a></h2>
<p><strong>NEW GITHUB RELEVANT INSTRUCTIONS TO BE ADDED</strong></p>
<p>e.g. how to respond to a pull-request</p>
</div>
<div class="section" id="carry-out-a-code-review">
<h2>Carry out a code review<a class="headerlink" href="#carry-out-a-code-review" title="Permalink to this headline">¶</a></h2>
<p><strong>NEED TO DECIDE HOW MUCH OF THE INSTRUCTIONS HERE ARE STILL RELEVANT!</strong></p>
<p>To begin, create a new CodeReview wiki page. To do this go to the ticket for function to be reviewed. Modify ticket the description by adding: <strong>[wiki:ticket/[ticketnumber]/CodeReview CodeReview]</strong></p>
<p>In the ticket description there should now be a ‘CodeReview?’ link. Click on this and from a drop down menu of templates choose CodeReview. Save any changes, the page has now been created.  <a class="reference external" href="http://fcm1/projects/ciid/wiki/ticket/43/CodeReviewDewpoint43">Example Code Review wiki</a></p>
<p>Test and review the code, for guidance, see Test and review the code, for guidance, see <a class="reference external" href="http://www-nwp/~appsci/QA/code/guidance.shtml">http://www-nwp/~appsci/QA/code/guidance.shtml</a></p>
<p>Also bear in mind that ideally all functions will:</p>
<ul class="simple">
<li>Compatible with Python 2 and 3 (you can use a tool like <a class="reference external" href="https://docs.python.org/2/library/2to3.html">2to3</a> to check this.)</li>
<li>Follow <a class="reference external" href="https://www.python.org/dev/peps/pep-0008/">pep8</a> type style guidelines</li>
<li>Include a docstring that follows either <a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/extensions/napoleon.html">numpy or google</a> docstring style.</li>
<li>Include a doctest.</li>
</ul>
<p>Go back and forth with the code writer until you are both happy with the function</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Useful commands</a><ul>
<li><a class="reference internal" href="#getting-your-own-local-copy-of-catnip">Getting your own local copy of CATNIP</a></li>
<li><a class="reference internal" href="#doctest-in-brief">Doctest in brief</a></li>
</ul>
</li>
<li><a class="reference internal" href="#qa-instructions-for-the-function-writer">QA instructions for the function writer</a><ul>
<li><a class="reference internal" href="#open-an-issue">Open an issue</a></li>
<li><a class="reference internal" href="#create-a-branch">Create a branch</a></li>
<li><a class="reference internal" href="#add-your-function-to-the-branch">Add your function to the branch</a></li>
<li><a class="reference internal" href="#pushing-your-changes-to-the-remote-repository">Pushing your changes to the remote repository</a></li>
<li><a class="reference internal" href="#passing-the-function-to-the-reviewer">Passing the function to the reviewer</a></li>
</ul>
</li>
<li><a class="reference internal" href="#qa-instructions-for-the-reviewer">QA instructions for the reviewer</a><ul>
<li><a class="reference internal" href="#check-out-the-function-to-be-reviewed">Check out the function to be reviewed</a></li>
<li><a class="reference internal" href="#carry-out-a-code-review">Carry out a code review</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">The CATNIP library</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="tools.html"
                        title="next chapter">Dew point temperature calculation</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/instructions.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="tools.html" title="Dew point temperature calculation"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="The CATNIP library"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">catnip 1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, gredmond.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.4.
    </div>
  </body>
</html>